<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>반응속도 테스트</title>

    <style>
      * {
        box-sizing: border-box;
      }
      #screen {
        width: 100%;
        min-height: 80vh;
        min-height: 80lvh;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: xx-large;
        font-weight: 700;
      }
      #result {
        display: flex;
        justify-content: center;
        padding-top: 20px;
      }
      .waiting {
        background-color: blue;
      }
      .starting {
        background-color: red;
      }
      .checking {
        background-color: green;
      }
    </style>
  </head>
  <body>
    <div id="screen" class="waiting">클릭해서 시작하세요</div>
    <div id="result">여기가 기록창</div>

    <script>
      const $screen = document.querySelector("#screen");
      const $result = document.querySelector("#result");

      let startTime;
      let endTime;

      function responseCheck() {
        waitingToStarting();
        startingToChecking();
        clicking();
      }

      function waitingToStarting() {
        screenChange("waiting", "starting");
        $screen.textContent = "초록색이 되면 클릭하세요";
      }

      function startingToChecking() {
        setTimeout(() => {
          screenChange("starting", "checking");
          startTime = new Date();
        }, randomCount());
      }

      function clicking() {
        if (endTime) {
          startTime = null;
          endTime = null;
        }

        if (startTime) {
          endTime = new Date();
          let time = (endTime - startTime) / 1000;
          $result.textContent = `당신의 반응 속도는 ${time}초입니다.`;
          console.log(time);
        } else {
          $result.textContent = `너무 빨랐어요.`;
        }
        startTime = null;
        endTime = null;
      }

      function randomCount() {
        let count = 3 + Math.random() * 17 * 1000;
        return count;
      }

      function screenChange(removeClass, addClass) {
        $screen.classList.remove(removeClass);
        $screen.classList.add(addClass);
      }

      $screen.addEventListener("click", responseCheck);
    </script>
  </body>
</html>
